<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
                <link rel = "stylesheet" type="text/css" href="reset.css">

      <link rel = "stylesheet" type="text/css" href="styles.css">


  </head>
  <body>
    <h1 class="vertical">Twittler</h1>
    <button type="button" id="addTweets">More Tweets!</button>

    <section id="tweetSection"></section>
    <script>
    
    $(document).ready(function(){

      //Populate the screen with 11 tweets already
      var index = streams.home.length - 1;
        while(index >= 0){
          var tweet = streams.home[index];


          var $singleTweet = $('<div class="singleTweet"></div>');//The big tweet box
          var $list = $('<ul></ul>');//The ul for each tweet component

          var $name = $('<li class="name"></li>');//The name of the tweeter
          $name.text('@' + tweet.user);

          var $message = $('<li class="message"></li>');//The message of the tweeter
          $message.text(tweet.message);

          var $date = $('<li class="date"></li>');//The date of the tweet
          $date.text(tweet.created_at);

          //Append all of these to each other.
          $singleTweet.appendTo($('#tweetSection'));
          $list.appendTo($singleTweet);
          $name.appendTo($list);
          $message.appendTo($list);
          $date.appendTo($list);

          index -= 1;
        }

        //Now, add to the tweets every second. 
        //the question is how to access the 11th, then 12th index of streams.


        function addNewTweet(){//Function that determines the next index in streams and tweets it
          var oldLength = ($('div').length);
          var newLength = streams.home.length - 1;
          console.log("length of tweets on page: " + oldLength);
          console.log("length of streams(aka newL: " + streams.home.length);
          
          for(var i = oldLength; i <= newLength; i++){
            var tweet = streams.home[i];
            var $singleTweet = $('<div class="singleTweet"></div>');//The big tweet box
            var $list = $('<ul></ul>');//The ul for each tweet component

            var $name = $('<li class="name"></li>');//The name of the tweeter
            $name.text('@' + tweet.user);

            var $message = $('<li class="message"></li>');//The message of the tweeter
            $message.text(tweet.message);

            var $date = $('<li class="date"></li>');//The date of the tweet
            $date.text(tweet.created_at);

            //Append all of these to each other.
            $singleTweet.prependTo($('#tweetSection'));
            $list.appendTo($singleTweet).slideDown();
            $name.appendTo($list);
            $message.appendTo($list);
            $date.appendTo($list);
          }

        }
        $('#addTweets').on('click', addNewTweet);
        //Times how often a new tweet shows up
    });
      
    </script>
  </body>
</html>
